<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>qdtsne: C++ library for t-SNE</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">qdtsne
   </div>
   <div id="projectbrief">A quick and dirty t-SNE C++ library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">C++ library for t-SNE </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__github_workspace_README"></a> <img src="https://github.com/LTLA/qdtsne/actions/workflows/run-tests.yaml/badge.svg" alt="Unit tests" style="pointer-events: none;" class="inline"/> <img src="https://github.com/LTLA/qdtsne/actions/workflows/doxygenate.yaml/badge.svg" alt="Documentation" style="pointer-events: none;" class="inline"/> <img src="https://github.com/LTLA/qdtsne/actions/workflows/compare-Rtsne.yaml/badge.svg" alt="Rtsne comparison" style="pointer-events: none;" class="inline"/> <a href="https://codecov.io/gh/LTLA/qdtsne"><img src="https://codecov.io/gh/LTLA/qdtsne/branch/master/graph/badge.svg?token=CX6G39BM7B" alt="Codecov" style="pointer-events: none;" class="inline"/></a></p>
<h1>Overview</h1>
<p>This repository contains a header-only C++ library implementing the Barnes-Hut t-distributed stochastic neighbor embedding (t-SNE) algorithm (van der Maaten and Hinton, 2008; van der Maaten, 2014). t-SNE is a non-linear dimensionality reduction technique that enables visualization of complex datasets by placing each observation on a low-dimensional (usually 2D) map based on its neighbors. The general idea is that neighboring observations are placed next to each other, thus preserving the local structure of the dataset from its original high-dimensional form. The non-linear nature of the algorithm gives it the flexibility to accommodate complicated structure that is not possible in linear techniques like PCA.</p>
<p>The code here is derived from the C++ code in the <a href="https://github.com/jkrijthe/Rtsne/"><b>Rtsne</b> R package</a>, updated for more modern C++. The only modification is that we have introduced an extra <code>max_depth</code> parameter that bounds the depth of the quad trees used for the Barnes-Hut force calculations. All nodes at the maximum depth are designated as leaf nodes; if multiple observations are present, they are aggregated into the center of mass for that node. This provides an upper bound on the runtime of the force calculation for each observation, improving performance for large datasets at the cost of some approximation.</p>
<h1>Quick start</h1>
<p>Using this library is as simple as including the header file in your source code:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="qdtsne_8hpp.html">qdtsne/qdtsne.hpp</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> Y = qdtsne::initialize_random(N); <span class="comment">// initial coordinates</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Assuming `data` contains high-dimensional data in column-major format,</span></div>
<div class="line"><span class="comment"> * i.e., each column is a observation and each row is a dimension.</span></div>
<div class="line"><span class="comment"> * This fills `Y` in column-major format where each row is a dimension </span></div>
<div class="line"><span class="comment"> * (defaulting to 2 dimensions) and each column is an observation.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><a class="code" href="classqdtsne_1_1Tsne.html">qdtsne::Tsne</a> thing;</div>
<div class="line"><span class="keyword">auto</span> ref = thing.<a class="code" href="classqdtsne_1_1Tsne.html#a3683e5b8dd12cc9fdd744388be6f1444">run</a>(data.data(), D, N, Y.data());</div>
<div class="ttc" id="aclassqdtsne_1_1Tsne_html"><div class="ttname"><a href="classqdtsne_1_1Tsne.html">qdtsne::Tsne</a></div><div class="ttdoc">Implements the t-SNE algorithm.</div><div class="ttdef"><b>Definition:</b> tsne.hpp:79</div></div>
<div class="ttc" id="aclassqdtsne_1_1Tsne_html_a3683e5b8dd12cc9fdd744388be6f1444"><div class="ttname"><a href="classqdtsne_1_1Tsne.html#a3683e5b8dd12cc9fdd744388be6f1444">qdtsne::Tsne::run</a></div><div class="ttdeci">auto run(const std::vector&lt; Index * &gt; &amp;nn_index, const std::vector&lt; Dist * &gt; &amp;nn_dist, int K, double *Y)</div><div class="ttdef"><b>Definition:</b> tsne.hpp:490</div></div>
<div class="ttc" id="aqdtsne_8hpp_html"><div class="ttname"><a href="qdtsne_8hpp.html">qdtsne.hpp</a></div><div class="ttdoc">Umbrella header for all qdtsne files.</div></div>
</div><!-- fragment --><p>You can change the parameters with the relevant setters:</p>
<div class="fragment"><div class="line">thing.<a class="code" href="classqdtsne_1_1Tsne.html#a73d513252f6c91ffebc2aa083a81842c">set_perplexity</a>(10).<a class="code" href="classqdtsne_1_1Tsne.html#a40164e72e679c9db9d9a61934232def0">set_mom_switch_iter</a>(100);</div>
<div class="line">thing.<a class="code" href="classqdtsne_1_1Tsne.html#a3683e5b8dd12cc9fdd744388be6f1444">run</a>(data.data(), D, N, Y.data());</div>
<div class="ttc" id="aclassqdtsne_1_1Tsne_html_a40164e72e679c9db9d9a61934232def0"><div class="ttname"><a href="classqdtsne_1_1Tsne.html#a40164e72e679c9db9d9a61934232def0">qdtsne::Tsne::set_mom_switch_iter</a></div><div class="ttdeci">Tsne &amp; set_mom_switch_iter(int m=Defaults::mom_switch_iter)</div><div class="ttdef"><b>Definition:</b> tsne.hpp:180</div></div>
<div class="ttc" id="aclassqdtsne_1_1Tsne_html_a73d513252f6c91ffebc2aa083a81842c"><div class="ttname"><a href="classqdtsne_1_1Tsne.html#a73d513252f6c91ffebc2aa083a81842c">qdtsne::Tsne::set_perplexity</a></div><div class="ttdeci">Tsne &amp; set_perplexity(double p=Defaults::perplexity)</div><div class="ttdef"><b>Definition:</b> tsne.hpp:246</div></div>
</div><!-- fragment --><p>You can also stop and start the algorithm:</p>
<div class="fragment"><div class="line"><a class="code" href="classqdtsne_1_1Tsne.html">qdtsne::Tsne</a> thing;</div>
<div class="line"><span class="keyword">auto</span> ref = thing.<a class="code" href="classqdtsne_1_1Tsne.html#aefec582eef4168c34acb8e3eae47f7b0">initialize</a>(data.data(), D, N);</div>
<div class="line">thing.<a class="code" href="classqdtsne_1_1Tsne.html#a3683e5b8dd12cc9fdd744388be6f1444">run</a>(ref, Y.data());</div>
<div class="line">thing.<a class="code" href="classqdtsne_1_1Tsne.html#a72f193ba522fa610878fa3113b7326ec">set_max_iter</a>(1100).<a class="code" href="classqdtsne_1_1Tsne.html#a3683e5b8dd12cc9fdd744388be6f1444">run</a>(ref, Y.data()); <span class="comment">// run for more iterations</span></div>
<div class="ttc" id="aclassqdtsne_1_1Tsne_html_a72f193ba522fa610878fa3113b7326ec"><div class="ttname"><a href="classqdtsne_1_1Tsne.html#a72f193ba522fa610878fa3113b7326ec">qdtsne::Tsne::set_max_iter</a></div><div class="ttdeci">Tsne &amp; set_max_iter(int m=Defaults::max_iter)</div><div class="ttdef"><b>Definition:</b> tsne.hpp:154</div></div>
<div class="ttc" id="aclassqdtsne_1_1Tsne_html_aefec582eef4168c34acb8e3eae47f7b0"><div class="ttname"><a href="classqdtsne_1_1Tsne.html#aefec582eef4168c34acb8e3eae47f7b0">qdtsne::Tsne::initialize</a></div><div class="ttdeci">auto initialize(const std::vector&lt; Index * &gt; &amp;nn_index, const std::vector&lt; Dist * &gt; &amp;nn_dist, int K)</div><div class="ttdef"><b>Definition:</b> tsne.hpp:327</div></div>
</div><!-- fragment --><p>See the <a href="https://ltla.github.io/qdtsne/">reference documentation</a> for more details.</p>
<h1>Building projects</h1>
<p>If you're already using CMake, you can add something like this to your <code>CMakeLists.txt</code>:</p>
<div class="fragment"><div class="line">include(FetchContent)</div>
<div class="line"> </div>
<div class="line">FetchContent_Declare(</div>
<div class="line">  WeightedLowess </div>
<div class="line">  GIT_REPOSITORY https://github.com/LTLA/qdtsne</div>
<div class="line">  GIT_TAG master # or any version of interest</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line">FetchContent_MakeAvailable(qdtsne)</div>
</div><!-- fragment --><p>And then:</p>
<div class="fragment"><div class="line"># For executables:</div>
<div class="line">target_link_libraries(myexe qdtsne)</div>
<div class="line"> </div>
<div class="line"># For libaries</div>
<div class="line">target_link_libraries(mylib INTERFACE qdtsne)</div>
</div><!-- fragment --><p>Otherwise, you can just copy the header file into some location that is visible to your compiler.</p>
<h1>References</h1>
<p>van der Maaten, L.J.P. and Hinton, G.E. (2008). Visualizing high-dimensional data using t-SNE. <em>Journal of Machine Learning Research</em>, 9, 2579-2605.</p>
<p>van der Maaten, L.J.P. (2014). Accelerating t-SNE using tree-based algorithms. <em>Journal of Machine Learning Research</em>, 15, 3221-3245. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
